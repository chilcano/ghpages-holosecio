---
title: SAST in your SDLC for Cloud-Native Apps 2
date: 2021-09-04T10:00:10+02:00
draft: false
type: post
layout: single_simple
categories: [Cloud, SDLC, DevSecOps, Holism]
tags: [SAST]
url: /2021/09/04/sast-in-sdlc-for-cloud-native-apps-2
aliases: 
   - /post/2021/09/04/sast-in-sdlc-for-cloud-native-apps-2
---

Unlike [the previous post](/2021/07/06/sast-in-sdlc-for-cloud-native-apps/), this post will implement a Jenkins Pipeline for a Full Stack Cloud-Native Application. That means the Jenkins Pipeline
will include new Jenkins stages to statically analyze the Python, Golang and YAML code, in addition to the already analyzed Infrastructure as Code (Terraform, Kubernetes, Ansible, CloudFormation, Dockerfiles, etc).   
This post will also explain how to consolidate all vulnerabilities/issues/bugs found and reports generated by all SAST Tools and Linters used in the CI/CD Pipeline.

{{< image-resize "/assets/blog20210904_sast_2/20210904-sast-in-your-cicd-pipeline-full-stack-apps.png" 710x >}}
{{< rawhtml >}}
<i><center>A SAST Jenkins Pipeline for a Full Stack Cloud Native Application</center></i>
{{</ rawhtml >}}

<!--more--> 

## Extra SAST Tools and Linters used

In this Jenkins Pipeline I am going to use the following SAST Tools/Linters:

1. Yaml Linter: [yamllint](https://github.com/adrienverge/yamllint)
2. Golang Linter: [golangci-lint](https://github.com/golangci/golangci-lint)
3. Python Linter: [Pylint](https://www.pylint.org)
4. IaC (Terraform, K8s, CloudFormation, Dockerfiles, etc): [Kics](https://github.com/checkmarx/kics), already used in the [previous post](/2021/07/06/sast-in-sdlc-for-cloud-native-apps/)

## Extra Jenkins Plugins used

Also, these Jenkins Plugins:
1. [archiveArtifacts](https://www.jenkins.io/doc/pipeline/steps/core): required to archive build artifacts (war, zip or jar) so that they can be downloaded later. In our case, I'll archive reports.
2. [publishHTML](https://www.jenkins.io/doc/pipeline/steps/htmlpublisher): required to publish HTML documents in Jenkins as a webserver. In our case, I'll publish Kics' report.
3. [Warnings-NG / recordIssues / tools: yamlLint, pyLint and goLint](https://www.jenkins.io/doc/pipeline/steps/warnings-ng): similar to `publishHTML`, but in this case I'll import XML and Json reports and publish as HTML.

If you want to add more Linters because you added Java and NodeJS code, then you can find other linters in this list: [Security along the SDLC for Cloud-Native Apps](/2020/02/10/security-along-the-container-based-sdlc/#oss-sec-list).

## Integrating SAST in the Jenkins Pipeline for a Full Stack Application

Now, let's create a new Pipeline, then copy the content of [`simple-ec2/_scripts/sast-pipeline-full-stack.groovy`](../simple-ec2/_scripts/sast-pipeline-full-stack.groovy) into Jenkins as a new Pipeline from Jenkins UI. 

Once the new Pipeline has been created, you should click over *Build with Parameters* and enter a Git repository URL to be scanned by all above Linters, even Kics.   
Some example Git repositories:
* [AWS-CDK-Examples](https://github.com/chilcano/aws-cdk-examples.git): A set of samples I used to experiment with AWS CDK. It contains Golang, Python, TypeScript, Dockerfile and YAML files.
* [Vulnerability-Goapp](https://github.com/Hardw01f/vulnerability-goapp.git): A vulnerable golang Web application for education.
* [TerraGoat](https://github.com/bridgecrewio/terragoat.git): It is a "Vulnerable by Design" Terraform repository.
* [Sock Shop](https://github.com/microservices-demo/microservices-demo.git): It is a Microservice Demo Application.

Once the pipeline is running, you will see 4 new links in the Jenkins user interface sidebar, each of them being links to each Report that each SAST Tool or Linter has generated.

{{< image-resize "/assets/blog20210904_sast_2/20210904-sast-in-your-cicd-pipeline-full-stack-2aggregate-reports.png" 710x "Aggregated Reports" >}} 
{{< image-resize "/assets/blog20210904_sast_2/20210904-sast-in-your-cicd-pipeline-full-stack-3report-yamllint.png" 710x "Yaml Lint Report" >}} 

{{< image-resize "/assets/blog20210904_sast_2/20210904-sast-in-your-cicd-pipeline-full-stack-4report-pylint" 710x "Pylint Report" >}} 
{{< image-resize "/assets/blog20210904_sast_2/20210904-sast-in-your-cicd-pipeline-full-stack-5report-golint" 710x "Golint Report" >}} 
 
> If you want to create this pipeline step by step, I recommend you follow this guide: 
> [https://github.com/chilcano/aws-cdk-examples/tree/main/simple-ec2](https://github.com/chilcano/aws-cdk-examples/tree/main/simple-ec2)


## Conclusions

1. Not all Projects are the same, you will need to know and identify the most appropriate SAST tools and Linter to build your CI/CD Pipelines with Static Security scanning tasks embedded. 
2. Consider standardising all SAST Tools and Linter Reports and findings on a single platform. Here I've used [Jenkins Warnings-NG](https://www.jenkins.io/doc/pipeline/steps/warnings-ng), which you can have a look at.
3. You should be aware that this (SAST) is only a part of DevSecOps. DAST, IASP, etc. have yet to be implemented. However, at this point, your Cloud-Native Projects are already more secure.

## References

1. [Security along the SDLC for Cloud-Native Apps](/2020/02/10/security-along-the-container-based-sdlc/#oss-sec-list) - Posted on 2020/02/10
2. [SAST in your SDLC for Cloud-Native Apps - Part 1](/2021/07/06/sast-in-sdlc-for-cloud-native-apps/)
