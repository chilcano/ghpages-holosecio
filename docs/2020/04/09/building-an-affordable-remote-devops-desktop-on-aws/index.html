<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Building an affordable remote DevOps desktop on AWS | Holistic Security</title>
  <meta name="description" content="With The Systems Thinking Methodology we are able to see any problem in a complete and holistic manner, in fact, The Systems Thinking Methodology allows us to solve complex problems (IT Security, Global Warming, World Poverty, etc.) by considering new factors, elements and variables (usability, trust, quality, risk, etc.) which were not considered initially.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Building an affordable remote DevOps desktop on AWS" />
<meta property="og:description" content="If you&rsquo;re going to work 100% remotely or are just tired of carrying a heavy laptop while commuting, why not spin up a DevOps Desktop PC in a public cloud and work from anywhere you want?
So, if you like the idea, this post for you.
In this post I&rsquo;ll explain you how to build your own Remote DevOps Desktop on AWS and configure your thinner Local PC to connect to remote one.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://holisticsecurity.io/2020/04/09/building-an-affordable-remote-devops-desktop-on-aws/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-04-09T10:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-04-09T10:00:00&#43;00:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building an affordable remote DevOps desktop on AWS"/>
<meta name="twitter:description" content="If you&rsquo;re going to work 100% remotely or are just tired of carrying a heavy laptop while commuting, why not spin up a DevOps Desktop PC in a public cloud and work from anywhere you want?
So, if you like the idea, this post for you.
In this post I&rsquo;ll explain you how to build your own Remote DevOps Desktop on AWS and configure your thinner Local PC to connect to remote one.
"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://holisticsecurity.io/css/style-white.css">
  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://holisticsecurity.io/images/favicon.ico" />

  
  
  
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-156433649-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://holisticsecurity.io/">
  
    <div id="logo" style="background-image: url(https://holisticsecurity.io/images/logo.png)"></div>
  
  <div id="title">
    <h1>Holistic Security</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/post">Writings</a></li>
      
        <li><a href="/categories">Categories</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
        <li><a href="/about">About</a></li>
      
    </ul>
  </div>
</header>



    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  
  <h1 class="posttitle" itemprop="name headline"> Building an affordable remote DevOps desktop on AWS </h1>
  
  <div class="content" itemprop="articleBody">
  
    <p>If you&rsquo;re going to work 100% remotely or are just tired of carrying a heavy laptop while commuting, why not spin up a DevOps Desktop PC in a public cloud and work from anywhere you want?
So, if you like the idea, this post for you.
In this post I&rsquo;ll explain you how to build your own Remote DevOps Desktop on AWS and configure your thinner Local PC to connect to remote one.</p>
<p><a href="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-0-arch.png"><img src="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-0-arch.png" alt=""></a></p>
<p>This article uses Terraform to provision a cheap AWS EC2 Spot instance. The approximate cost will be less of 10 euros/month for a <code>m1.small</code> instance located in <code>us-east-1</code> region. Also Iâ€™ll share the Github repository with all Terraform scripts where you will be able to change the configuration.</p>
<h2 id="getting-started">Getting started</h2>
<p>You have to clone the <a href="https://github.com/chilcano/affordable-remote-desktop">Affordable Remote DevOps Desktop</a> and run through all steps explained there. Next a compacted list of commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ git clone https://github.com/chilcano/affordable-remote-desktop
$ cd affordable-remote-desktop

$ terraform init

$ terraform plan <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -var devenv_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cheapdevops&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -var ssh_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;remotedevenv&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -var developer_cidr_blocks<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;83.32.214.211/32&#34;</span> 

$ terraform apply <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -var devenv_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cheapdevops&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -var ssh_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;remotedevenv&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -var developer_cidr_blocks<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;83.32.214.211/32&#34;</span> 
</code></pre></div><p>After a few minutes, you will be able to connect to your remote DevOps Desktop through SSH.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ ssh ubuntu@<span style="color:#66d9ef">$(</span>terraform output remotedevenv_fqdn<span style="color:#66d9ef">)</span> -i ~/.ssh/remotedevenv
</code></pre></div><h2 id="software-installed-in-the-remote-devops-desktop">Software installed in the remote DevOps Desktop</h2>
<p>In the moment of writting this post, the software base and tools installed are:</p>
<ol>
<li>Ubuntu 18.04 server (<code>ubuntu/images/hvm-instance/ubuntu-bionic-18.04-amd64-server</code>)</li>
<li><a href="https://www.xfce.org">XFCE4 Desktop</a></li>
<li><a href="https://wiki.x2go.org">X2Go</a></li>
<li>EC2 Spot Instance
<ul>
<li><code>m1.small</code> (default)</li>
<li><code>us-east-1</code> (default)</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>Tools installed</th>
<th>Installed</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>1) Chromium</td>
<td>Yes</td>
<td>80.0.3987.163</td>
</tr>
<tr>
<td>2) VS Code</td>
<td>Yes</td>
<td>1.43.2</td>
</tr>
<tr>
<td>3) Terraform</td>
<td>Yes</td>
<td>0.12.24</td>
</tr>
<tr>
<td>4) AWS CLI</td>
<td>Yes</td>
<td>1.14.44</td>
</tr>
<tr>
<td>5) Git</td>
<td>Yes</td>
<td>2.17.1</td>
</tr>
<tr>
<td>6) Python</td>
<td>Yes</td>
<td>3.6.9</td>
</tr>
<tr>
<td>7) Java</td>
<td>Yes</td>
<td>11</td>
</tr>
<tr>
<td>8) Docker</td>
<td>Yes</td>
<td>19.03.6</td>
</tr>
</tbody>
</table>
<h2 id="why-xfce4-and-x2go">Why XFCE4 and X2Go?</h2>
<p>The answer is simple, XFCE4 is a lightweight Linux Desktop Environment and works flawlessly so far with X2Go.
X2Go is a X-windows remote access software that has clients for Windows, Mac, and Linux and provides the best performance compared to <a href="https://en.wikipedia.org/wiki/X_Window_System">X11 - X Window System</a>, VNC and XRDP (X-windows version of the Windows Remote Desktop Protocol).</p>
<h2 id="things-to-improve">Things to improve</h2>
<ol>
<li><del>Instead of using a standard Ubuntu AMI, prepare a custom AMI with pre-installed XFCE4 and X2Go (getting this EC2 instance created takes 25 minutes!), and moving all DevOps Tooling installation to other separate script.</del> (<a href="/2020/04/20/building-an-affordable-remote-devops-desktop-on-aws-part2">see post part2</a>)</li>
<li>Use Ansible instead of Bash script to provision the DevOps tools such as VS Code, Java, Terraform, Git, etc.</li>
<li>Backup and restoring of critical, sensitive information and custom configuration into AWS S3 or X2Go capabilities to mount remote disks over SSH.</li>
<li>Vertical Autoscaling (increase RAM, CPU or change type of instance).</li>
<li>Metrics (performance when using ADSL, WAN, 4G, etc.)</li>
</ol>
<h2 id="connecting-to-the-remote-devops-desktop">Connecting to the remote DevOps Desktop</h2>
<p>Below some screenshots if you want to know how looks like in Ubuntu 19.10 and if you want configure your X2Go Client.
Before lets get the FQDN of your EC2 instance.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">chilcano@inti:~/git-repos/affordable-remote-desktop$ terraform output remotedevenv_fqdn
ec2-100-26-48-80.compute-1.amazonaws.com
</code></pre></div><p><a href="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-2.png"><img src="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-1.png" alt=""></a></p>
<p><a href="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-4.png"><img src="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-3.png" alt=""></a></p>
<p>And finally here below the Remote DevOps Desktop.</p>
<p><a href="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-6b.png"><img src="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-5.png" alt=""></a></p>
<p>And here the configuration of a great feature: Sharing files between local and remote instance over SSH using X2Go Client.</p>
<p><a href="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-7b.png"><img src="https://raw.githubusercontent.com/chilcano/affordable-remote-desktop/master/imgs/remote-devops-desktop-x2go-client-7.png" alt=""></a></p>
<h2 id="conclusions">Conclusions</h2>
<ol>
<li>AWS EC2 Spot is still the cheaper Public Cloud resource in the market, although you could get cheaper one in <a href="https://www.digitalocean.com">Digital Ocean</a> and <a href="https://cloud.google.com">Google Cloud</a>.</li>
<li>XFCE4 and X2Go, one is lightweight and the other is faster. Although there are not good X2Go client for iOS, both together are still the best option.</li>
<li>Creating an EC2 Spot instance with XFCE4 and X2Go takes around 20 minutes and that is not good from the developer experience point of view and neither resilience point of view. The idea is to provide an OS bundle (AMI) that has, as a minimum, XFCE4 and X2Go already pre-installed.</li>
<li>Backup and restoration is very important if we are using ephemeral resources, its implementation is considered as a critical functionality and is included in this project, and it will be implemented using AWS S3 or simply X2Go and its ability to sync files remotely over SSH .</li>
</ol>
  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Holistic Security 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/post">Writings</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-156433649-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
